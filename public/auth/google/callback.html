<!DOCTYPE html>
<html>
  <head>
    <title>Auth callback</title>
  </head>
  <body>
    <script>
      !function() {
        const match = location.search.match(/state=([^&]+)&code=([^&]+)/);
        if (!match) {
          window.opener.postMessage({
            error: 'no code and state in query',
          });
        } else {
          window.opener.postMessage({
            state: match[1],
            code: match[2],
          });
        }
        window.close();
      }();
    </script>
  </body>
</html>
